<!DOCTYPE html>
<html lang="en">
<head>
  <title>PESTICIDE SUPPLY SYSTEM | Products</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/jquery-1.7.1.min.js"></script>
  <script src="js/superfish.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/tms-0.4.1.js"></script>
  <script src="js/slider.js"></script>

  <style>
    * {
      box-sizing: border-box;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .product {
      margin-bottom: 20px;
    }

    .prode {
      background-color: yellow;
      margin-left: 9px;
      margin-bottom: 9px;
      border: 2px white solid;
    }

    .product-image img {
      width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="main-bg">
    <!-- Header -->
    <header>
      <div class="inner">
        <h1 style="color: black; text-decoration: none;">PESTICIDES SUPPLY SYSTEM - Agriculture company</h1>
        <nav>
          <ul class="sf-menu">
            <li><a href="/home">home</a></li>
            <li class="current"><a href="/products">products</a></li>
            <li><a href="/pricing">pricing</a></li>
            <li><a href="/contacts">contacts</a></li>
            <li><a href="/reviews">reviews</a></li>
            <li><a href="/cart" style="color: black; text-decoration: none;">ðŸ›’ Cart</a></li>
            <li><button><a href="/" style="color: black; text-decoration: none;">LOG OUT</a></button></li>
          </ul>
        </nav>
        <div class="clear"></div>
      </div>
    </header>
    <!-- Content -->
    <section id="content">
      <div class="container_24">
        <div class="wrapper">
          <div class="grid_24 content-bg">
            <div class="wrapper">
              <article class="grid_22 suffix_1 prefix_1 alpha omega">
                <h2>Our products: </h2>
                <!-- Search input -->
                <div class="wrapper">
                  <input type="text" placeholder="Search for..." id="searchinput">
                  <button type="button" id="searchbutton">Search</button>
                </div>
                <!-- Product grid -->
                <div class="product-grid">
                  <% if (products && products.length > 0) { %>
                    <% products.forEach(function(product) { %>
                      <div class="product" style="display: inline-block; margin: 15px;">
                        <div class="prode" style="width: 250px; height: 320px; border: 1px solid #ccc; padding: 10px; box-sizing: border-box; text-align: center;">
                          <div style="margin-bottom: 10px; font-weight: bold;"><%= product.productName %></div>
                          <div><strong>Product:</strong> <%= product.product %></div>
                          <div><strong>Price:</strong> <%= product.price %></div>
                          <div><strong>Dosage:</strong> <%= product.dosage %></div>
                          <div><strong>Description:</strong> <%= product.description %></div>
                          <div><strong>Target:</strong> <%= product.target %></div>
                          <div><strong>Stock Remaining:</strong> <span id="quantity-<%= product.id %>"><%= product.quantity %></span></div>
                          <!-- Add to Cart button with data attributes -->
                          <button 
                            class="add-to-cart-btn" 
                            data-id="<%= product.id %>" 
                            data-name="<%= product.productName %>" 
                            data-price="<%= product.price %>" 
                            style="padding: 5px 10px;"
                          >
                            Add to Cart
                          </button>
                        </div>
                      </div>
                    <% }); %>
                  <% } else { %>
                    <p>No products available</p>
                  <% } %>
                </div>
              </article>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    // Cart functionality
    function addToCart(productData) {
      const { id, productName, price } = productData;
      
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const existingItem = cart.find(item => item.id === id);
      
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        cart.push({
          id: id,
          productName: productName,
          price: parseFloat(price),
          quantity: 1
        });
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      alert(`${productName} added to cart!`);
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      // Add to cart button handlers
      document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', function() {
          addToCart({
            id: this.dataset.id,
            productName: this.dataset.name,
            price: this.dataset.price
          });
        });
      });

      // Search functionality
      const searchInput = document.getElementById('searchinput');
      const productList = document.querySelectorAll('.product');

      searchInput.addEventListener('input', function() {
        const searchTerm = searchInput.value.trim().toLowerCase();

        productList.forEach(function(product) {
          const productName = product.textContent.toLowerCase();
          product.style.display = productName.includes(searchTerm) ? 'inline-block' : 'none';
        });
      });
    });
  </script>
</body>
</html>